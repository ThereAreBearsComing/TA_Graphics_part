# 网格结构解析以及Shader输入



## Maya中的Python脚本
```Python
import maya.api.OpenMaya as om

selection = om.MGlobal.getActiveSelectionList();
iter = om.MItSelectionList (selection, om.MFn.kGeometric);

vertexList = list()
indexList = list()
uvList = list()
normalList = list()

while not iter.isDone():

	dagPath = iter.getDagPath()
	mObj = iter.getDependNode()

	iterPolys = om.MItMeshPolygon(mObj)

	# Iterate through polys on current mesh
	while not iterPolys.isDone():

		verts = iterPolys.getVertices()
		pntAry, intAry = iterPolys.getTriangles()
		
		vertices = iterPolys.getVertices()	
		
		uAry, vAry = iterPolys.getUVs()
		normalAry = iterPolys.getNormals()
		
		uvs = list()
		for i in range(len(uAry)):
			uvs.append((uAry[i], vAry[i]))
		
		vertexList.append(list((pnt.x, pnt.y, pnt.z) for pnt in pntAry))
		indexList.append(list(intAry))
		uvList.append(uvs)
		normalList.append(list((v.x, v.y, v.z) for v in normalAry))
		
		iterPolys.next(None)
		
	iter.next()

```
