# 如何使用逻辑条件判断

* #if #else
由宏来实现，被称作静态分支，在编译期决定，没有性能损失

* if else语句
但是if条件中仅有uniform变量和常量组成，在运行期相当于 #if #else，也没有运行期损失(但是驱动判断static uniform branch有轻微消耗)

* 真正的if else语句，也就是动态分支

在CPU编程中,if, else都会进行优化，CPU最终只会执行其中一个分支。但这种一会对GPU来说完全无效，因为在片元着色器操作对象为像素, 如果一部分像素采取一个分支，其他采取另一部分，GPU会让所有像素都运行所有分支，最后将选用分支写入寄存器中，所以switch, if , else等在shader中开销不小，应尽量避免使用过多逻辑防止大开销。

使用step()、ceil()、clamp()、lerp()等函数进行替换，用阶梯函数的思维来构建条件语句

| 函数 | 定义 | 解释 |
| :-----| :---- | :---- |
| step(a, b)     | b小于a返回0，否则，返回1 | 结果非0，即1 |
| ceil(x)        | 对输入参数向上取整。| ceil(float(1.3)) ，其返回值为 2.0 |
| floor(x)       | 对输入参数向下取整 | 例如：floor(float(1.3)) ，其返回值为 1.0 |
| clamp(x, a, b) | 如果 x 值小于 a，则返回 a；如果 x 值大于 b，返回 b；否则，返回 x | 定义上下边界，过界责钳制与上下界 |
| [lerp(a, b, w)](Pages/1.0.1Lerp.md) | lerp(a, b, w) = a + (b - a) * w = (1 - w) * a + w * b | 简单来说，lerp函数就是在y1和y2之间过渡，唯一不同的地方就是，y1和y2可以是一个值，也可以是一个函数。 |

