# URP后处理
在旧的渲染管线中，你可以直接在相机组件上添加一个脚本，然后使用 OnRenderImage(RenderTexture sourceTexture, RenderTexture destTexture) 函数来实现后处理。然而，在URP下，OnRenderImage 已经被废弃，所以它在URP下将不会被调用。

在URP下实现后处理效果的方法是创建一个自定义的后处理效果，然后在后处理效果的 Render 方法中执行你的操作。具体来说，你需要继承 UnityEngine.Rendering.Universal.PostProcessEffectSettings 和 UnityEngine.Rendering.Universal.PostProcessEffectRenderer<T>，其中 T 是你的设置类。

然后，你需要在Unity的后处理卷轴（Post Processing Volume）中添加你的后处理效果。在那里，你可以调整你的后处理效果的参数，并选择你的后处理效果影响的范围。

<br>![image](https://github.com/ThereAreBearsComing/aBookOFtechArt/assets/74708198/774ba7d3-8312-4575-b505-31a4211be2c7)

### 开放参数到VolumeComponent模块
在此脚本中开放后处理参数到面板上：
```C#
using UnityEngine;
using UnityEngine.Rendering;
using UnityEngine.Rendering.Universal;

namespace FreeBird.Rendering
{
    public class ColorTint : VolumeComponent
    {
        //【设置颜色参数】
        public ColorParameter colorChange = new ColorParameter(Color.white, true);//如果有两个true,则为HDR设置
                                                                                  //【高斯模糊：次数】
        public IntParameter GuassianBlurTimes = new ClampedIntParameter(1, 0, 20);//模糊次数限制在0-5
                                                                                  //【高斯模糊：半径】
        public FloatParameter GuassianBlurRange = new ClampedFloatParameter(1.0f, 0.0f, 5.0f);//模糊半径
                                                                                              //【双重模糊：次数】

..........
```



