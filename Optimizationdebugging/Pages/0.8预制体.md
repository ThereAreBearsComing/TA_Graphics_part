# 预制体
## Prefabs 预制体
Unity中的预制体是用来存储游戏对象、子对象及其所需组件的可重用资源，一般来说预制体资源可充当资源模版，在此模版基础上可以在场景中创建新的预制体实例。

## 使用预制体好处
* 由于预制体系统可以自动保持所有实例副本同步，因此可以比单纯地简单复制粘贴游戏对象做到更好的对象管理
* 此外通过预制体嵌套(Nested Prefabs)可以将一个预制体嵌套到另一个预制体中，从而创建多个易于编辑的复杂游戏对象层级视图
* 可以通过覆盖各个预制体实例的设置来创建预制体变体(Prefabs Variant)，从而可以将-系列覆盖组合在一起形成有意义预制体的变化
    * 后边的房子为前边的预制体嵌套组成
    * ![image](https://github.com/ThereAreBearsComing/aBookOFtechArt/assets/74708198/07eb3b5d-d98a-47a2-95f7-63bc06385a73)

### 嵌套预制体与单预制体相比的优点与缺点
* 优点:
  * 嵌套预制体方便预制体管理，方面资源重复利用，易于统计场景复杂度
  * 美术制作时可以比较合理的分配UV,和贴图利用率
  * 方便关卡设计人员发挥，充分合理利用资源
  * 嵌套预制体比较方便利用工具做LOD，LOD效果也比较好
  * 嵌套预制体修改方便，只需替换子预制体可以做到所有预制体同步
  * 比较方便做场景遮挡剔除，可以做到精细的遮挡剔除优化效果
* 缺点:
  * 手动做Bundle依赖时要按Scene方式处理，依赖关系较为复杂
  * 可能会增加材质数量与Drawcall数量（对象划分小之后，材质过多合批时容易打断，但由于遮挡剔除和SRPBatcher技术存在，设计合理和场景优化后可缓解）
  * 不太适合做大规模远景对象（太小不好做LOD，远景对象采用模型替代或者面片）
  * 美术与关卡设计人员要充分考虑组合复杂度与特例场景显示，避免重复性和单一性，需要跟多的沟通成本

* 创建方式：右键 ————> Create ————> Prefab Variant，之后会进入Prefab编辑模式

* 使用Prefab变体的一些限制
  * 不能改变本体Prefab游戏对象 (GameObject ) 层级
  * 不能删除本体Prefab中的游戏对象，但可以通过Deactive游戏对象来达到与删除游戏对象同样的效果
  * 对于Prefab变体要保持其Override属性的变化，不能通过Apply to base把这些变化应用到本体Prefab上，这样会破坏基础Prefab的结构和功能

* 注：查看Prefab Variant文本文件会发现，Prefab 保存的时GameObject对象，在场景中使用时则会直接索引，而 Prefab Variant 保存时Prefab Instance，同时通过 guid: + ID 索引回基础component上。当然在制作变体时也应该设置好对应的Tag，Layer mask 和 static选项 这样会给游戏整体对象带来优化。





